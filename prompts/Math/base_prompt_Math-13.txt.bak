### BUG_REPORT
Title: new multivariate vector optimizers cannot be used with large number of weights

Description:
When using the Weigth class to pass a large number of weights to multivariate vector optimizers, an nxn full matrix is created (and copied) when a n elements vector is used. This exhausts memory when n is large.
This happens for example when using curve fitters (even simple curve fitters like polynomial ones for low degree) with large number of points. I encountered this with curve fitting on 41200 points, which created a matrix with 1.7 billion elements.


### FAILING_TEST
org.apache.commons.math3.optimization.fitting.CurveFitter.CurveFitter(DifferentiableMultivariateVectorOptimizer)
org.apache.commons.math3.optimization.fitting.CurveFitter.CurveFitter(MultivariateDifferentiableVectorOptimizer)
org.apache.commons.math3.optimization.fitting.PolynomialFitter.fit(double[])
org.apache.commons.math3.analysis.polynomials.PolynomialFunction.PolynomialFunction(double)
org.apache.commons.math3.optimization.fitting.CurveFitter.fit(int,T,double[])
org.apache.commons.math3.optimization.fitting.PolynomialFitter.PolynomialFitter(DifferentiableMultivariateVectorOptimizer)
org.apache.commons.math3.optimization.fitting.PolynomialFitter.fit(double[])
org.apache.commons.math3.optimization.fitting.CurveFitter.fit(T,double[])
org.apache.commons.math3.optimization.fitting.CurveFitter.fit(int,T,double[])
org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.optimize(int,DifferentiableMultivariateVectorFunction,double[],double[],double[])

### CODE_SNIPPETS

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.CurveFitter.CurveFitter(DifferentiableMultivariateVectorOptimizer)
------------------------------------------------------------------------------------------
@Deprecated
    public CurveFitter(final DifferentiableMultivariateVectorOptimizer optimizer) {
        this.oldOptimizer = optimizer;
        this.optimizer    = null;
        observations      = new ArrayList<WeightedObservedPoint>();
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.CurveFitter.CurveFitter(MultivariateDifferentiableVectorOptimizer)
------------------------------------------------------------------------------------------
@Deprecated
    public CurveFitter(final DifferentiableMultivariateVectorOptimizer optimizer) {
        this.oldOptimizer = optimizer;
        this.optimizer    = null;
        observations      = new ArrayList<WeightedObservedPoint>();
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.PolynomialFitter.fit(double[])
------------------------------------------------------------------------------------------
@Deprecated
    public double[] fit() {
        return fit(new PolynomialFunction.Parametric(), new double[degree + 1]);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.analysis.polynomials.PolynomialFunction.PolynomialFunction(double)
------------------------------------------------------------------------------------------
public PolynomialFunction(double c[])
        throws NullArgumentException, NoDataException {
        super();
        MathUtils.checkNotNull(c);
        int n = c.length;
        if (n == 0) {
            throw new NoDataException(LocalizedFormats.EMPTY_POLYNOMIALS_COEFFICIENTS_ARRAY);
        }
        while ((n > 1) && (c[n - 1] == 0)) {
            --n;
        }
        this.coefficients = new double[n];
        System.arraycopy(c, 0, this.coefficients, 0, n);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.CurveFitter.fit(int,T,double[])
------------------------------------------------------------------------------------------
public double[] fit(T f, final double[] initialGuess) {
        return fit(Integer.MAX_VALUE, f, initialGuess);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.PolynomialFitter.PolynomialFitter(DifferentiableMultivariateVectorOptimizer)
------------------------------------------------------------------------------------------
@Deprecated
    public PolynomialFitter(int degree, final DifferentiableMultivariateVectorOptimizer optimizer) {
        super(optimizer);
        this.degree = degree;
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.PolynomialFitter.fit(double[])
------------------------------------------------------------------------------------------
@Deprecated
    public double[] fit() {
        return fit(new PolynomialFunction.Parametric(), new double[degree + 1]);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.CurveFitter.fit(T,double[])
------------------------------------------------------------------------------------------
public double[] fit(T f, final double[] initialGuess) {
        return fit(Integer.MAX_VALUE, f, initialGuess);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.fitting.CurveFitter.fit(int,T,double[])
------------------------------------------------------------------------------------------
public double[] fit(T f, final double[] initialGuess) {
        return fit(Integer.MAX_VALUE, f, initialGuess);
    }

------------------------------------------------------------------------------------------
Function: org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.optimize(int,DifferentiableMultivariateVectorFunction,double[],double[],double[])
------------------------------------------------------------------------------------------
@Override
    @Deprecated
    public PointVectorValuePair optimize(int maxEval,
                                         final DifferentiableMultivariateVectorFunction f,
                                         final double[] target, final double[] weights,
                                         final double[] startPoint) {
        return optimizeInternal(maxEval,
                                FunctionUtils.toMultivariateDifferentiableVectorFunction(f),
                                new Target(target),
                                new Weight(weights),
                                new InitialGuess(startPoint));
    }


### FAILURE_TRACE

------------------------------------------------------------------------------------------
Fail #1
Test: org.apache.commons.math3.optimization.fitting.PolynomialFitterTest#testLargeSample
Runtime: 4419875740
------------------------------------------------------------------------------------------
java.lang.OutOfMemoryError: Java heap space at org.apache.commons.math3.linear.DiagonalMatrix.getData(DiagonalMatrix.java:204) at org.apache.commons.math3.linear.TriDiagonalTransformer.<init>(TriDiagonalTransformer.java:69) at org.apache.commons.math3.linear.EigenDecomposition.transformToTridiagonal(EigenDecomposition.java:561) at org.apache.commons.math3.linear.EigenDecomposition.<init>(EigenDecomposition.java:122) at org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.squareRoot(AbstractLeastSquaresOptimizer.java:562) at org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.setUp(AbstractLeastSquaresOptimizer.java:508) at org.apache.commons.math3.optimization.direct.BaseAbstractMultivariateVectorOptimizer.optimizeInternal(BaseAbstractMultivariateVectorOptimizer.java:239) at org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.optimizeInternal(AbstractLeastSquaresOptimizer.java:496) at org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.optimize(AbstractLeastSquaresOptimizer.java:423) at org.apache.commons.math3.optimization.general.AbstractLeastSquaresOptimizer.optimize(AbstractLeastSquaresOptimizer.java:62) at org.apache.commons.math3.optimization.fitting.CurveFitter.fit(CurveFitter.java:189) at org.apache.commons.math3.optimization.fitting.CurveFitter.fit(CurveFitter.java:153) at org.apache.commons.math3.optimization.fitting.PolynomialFitter.fit(PolynomialFitter.java:110) at org.apache.commons.math3.optimization.fitting.PolynomialFitterTest.testLargeSample(PolynomialFitterTest.java:241) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78) at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) at org.junit.runners.ParentRunner.run(ParentRunner.java:363) at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
