# Prompts Directory

This directory contains the **base prompt files** generated by the pipeline for each bug in the dataset. These prompts serve as structured input to the LLM for fault localization experiments.

## üìÅ Structure

```
prompts/
‚îú‚îÄ‚îÄ <Project>/
‚îÇ   ‚îî‚îÄ‚îÄ base_prompt_<Project>-<bug_id>.txt
```

### Example Projects

**Java Projects (Defects4J):**
- `Math/` - Apache Commons Math library
- `Lang/` - Apache Commons Lang library
- `Chart/` - JFreeChart library
- `Time/` - Joda-Time library

**Python Projects (BugsInPy):**
- `black/` - Python code formatter
- `thefuck/` - Magnificent app that corrects previous console commands
- `tqdm/` - Progress bar library

## üìù File Format

Each base prompt file follows this structure:

```
### BUG_REPORT
Title: <bug title>

Description:
<detailed bug description>

### FAILING_TEST
<list of top-N failing test methods>

### CODE_SNIPPETS

---
Rank: 1
Method: <method_signature>
Ochiai_Score: <score>
Resolved_File: <file_path>
Resolved_Symbol: <symbol>
Status: OK/NOT_FOUND
Snippet:
<source code>

---
Rank: 2
...

### FAILURE_TRACE

------------------------------------------------------------------------------------------
Fail #1
Test: <test_name>
Runtime: <execution_time>
------------------------------------------------------------------------------------------
<stack trace>

```

## üî® Generation Process

Base prompts are generated through a three-stage pipeline:

### Stage 1: Bug Report Extraction
**Script:** `build_all_base_prompts_bug_report.py`

Extracts bug title and description from `BUG_REPORT/<Project>/<Project>-<id>.json` and creates initial prompt files.

### Stage 2: Test & Code Snippet Enrichment
**Script:** `enrich_base_prompts_with_tests_and_snippets.py`

- Reads failing test methods from `FAILING_TEST/<Project>/`
- Extracts corresponding code snippets from `CODE_SNIPPETS/<Project>/`
- Appends top-N failing methods with their source code

### Stage 3: Failure Trace Augmentation
**Script:** `append_failure_trace_to_all_base_prompts.py`

- Reads test execution data from `FAILURE_TRACE/<Project>/<bug_id>/tests.csv`
- Filters rows where `outcome=FAIL`
- Appends stack traces to prompts

